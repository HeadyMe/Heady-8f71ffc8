{#
/**
 * Heady Systems Admin Dashboard â€” Comprehensive Template
 * 
 * Tabbed interface: Dashboard | Services | HCFP | HeadyLens | Customize | Access | Settings
 * Includes HeadyBuddy widget for AI-assisted admin tasks.
 */
#}

{# â”€â”€ Admin Navigation Tab Bar â”€â”€ #}
<div class="heady-admin-wrapper">
  <nav class="heady-admin-nav">
    <div class="heady-admin-logo">
      <span class="heady-admin-logo-icon">ğŸŒŸ</span>
      <span>Heady Admin</span>
    </div>
    <div class="heady-admin-tabs">
      <a href="{{ path('heady_admin.dashboard') }}" class="heady-tab active">ğŸ“Š Dashboard</a>
      <a href="{{ path('heady_admin.services') }}" class="heady-tab">ğŸ”Œ Services</a>
      <a href="{{ path('heady_admin.hcfp') }}" class="heady-tab">ğŸ›¡ï¸ HCFP</a>
      <a href="{{ path('heady_admin.headylens') }}" class="heady-tab">ğŸ”­ HeadyLens</a>
      <a href="{{ path('heady_admin.customize') }}" class="heady-tab">ğŸ¨ Customize</a>
      <a href="{{ path('heady_admin.access_control') }}" class="heady-tab">ğŸ‘¥ Access</a>
      <a href="{{ path('heady_admin.settings') }}" class="heady-tab">âš™ï¸ Settings</a>
    </div>
    <div class="heady-admin-user">
      <span class="heady-user-badge">{{ current_user }}</span>
    </div>
  </nav>

  {# â”€â”€ Stats Cards â”€â”€ #}
  <div class="heady-dashboard-grid">
    <div class="heady-card">
      <div class="heady-card-header">
        <div>
          <div class="heady-stat-label">Active Services</div>
          <div class="heady-stat-value">{{ stats.total_services }}</div>
          <div class="heady-stat-change change-positive">ğŸŸ¢ All online</div>
        </div>
        <div class="heady-card-icon icon-blue">ğŸš€</div>
      </div>
    </div>

    <div class="heady-card">
      <div class="heady-card-header">
        <div>
          <div class="heady-stat-label">HCFP Policy</div>
          <div class="heady-stat-value" style="font-size: 1.2rem">{{ stats.hcfp_mode }}</div>
          <div class="heady-stat-change change-positive">ğŸ›¡ï¸ {{ stats.violations }} violations</div>
        </div>
        <div class="heady-card-icon icon-green">ğŸ”’</div>
      </div>
    </div>

    <div class="heady-card">
      <div class="heady-card-header">
        <div>
          <div class="heady-stat-label">System Health</div>
          <div class="heady-stat-value">{{ stats.system_health }}%</div>
          <div class="heady-stat-change change-positive">âœ… Optimal</div>
        </div>
        <div class="heady-card-icon icon-green">ğŸ’š</div>
      </div>
    </div>

    <div class="heady-card">
      <div class="heady-card-header">
        <div>
          <div class="heady-stat-label">Uptime</div>
          <div class="heady-stat-value">{{ stats.uptime_hours }}h</div>
          <div class="heady-stat-change change-positive">â±ï¸ Continuous</div>
        </div>
        <div class="heady-card-icon icon-yellow">ğŸ“ˆ</div>
      </div>
    </div>
  </div>

  {# â”€â”€ Ecosystem Overview â”€â”€ #}
  <div class="heady-section">
    <h2 class="heady-section-title">Heady Ecosystem â€” 6 Services</h2>
    <div class="heady-ecosystem-grid">
      {% for svc in ecosystem %}
        <div class="heady-eco-card" style="border-color: {{ svc.color }}40;">
          <div class="heady-eco-icon" style="background: {{ svc.color }}22; color: {{ svc.color }};">{{ svc.icon }}</div>
          <h3>{{ svc.name }}</h3>
          <p class="heady-eco-geometry">{{ svc.geometry }}</p>
          <a href="{{ svc.url }}" target="_blank" class="heady-eco-link" style="color: {{ svc.color }};">Visit â†’</a>
          <span class="heady-eco-status online">â— Online</span>
        </div>
      {% endfor %}
    </div>
  </div>

  {# â”€â”€ Services Table â”€â”€ #}
  <div class="heady-table-container">
    <div class="heady-table-header">
      <h2 class="heady-card-title">Running Services</h2>
      <div class="heady-search-box">
        <span class="heady-search-icon">ğŸ”</span>
        <input type="text" class="heady-search-input" placeholder="Search services..." id="serviceSearch">
      </div>
    </div>
    <table id="servicesTable">
      <thead>
        <tr>
          <th>Service</th>
          <th>Type</th>
          <th>Status</th>
          <th>Domain</th>
          <th>Port</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        {% for service in services %}
          <tr>
            <td><strong>{{ service.name }}</strong></td>
            <td><span class="heady-type-badge">{{ service.type }}</span></td>
            <td><span class="heady-status-badge status-{{ service.status }}">â— {{ service.status|capitalize }}</span></td>
            <td>{{ service.domain }}</td>
            <td>{{ service.port }}</td>
            <td class="heady-actions">
              <button class="heady-btn heady-btn-sm heady-btn-secondary" title="Restart">ğŸ”„</button>
              <button class="heady-btn heady-btn-sm heady-btn-secondary" title="Configure">âš™ï¸</button>
              <button class="heady-btn heady-btn-sm heady-btn-danger" title="Stop">â¹ï¸</button>
            </td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>

  {# â”€â”€ Quick Actions Panel â”€â”€ #}
  <div class="heady-section">
    <h2 class="heady-section-title">Quick Actions</h2>
    <div class="heady-quick-actions">
      <button class="heady-action-btn" onclick="HeadyAdmin.refreshStatus()">ğŸ”„ Refresh All Status</button>
      <button class="heady-action-btn" onclick="HeadyAdmin.deployAll()">ğŸš€ Deploy All Sites</button>
      <button class="heady-action-btn" onclick="HeadyAdmin.openLens()">ğŸ”­ Open HeadyLens</button>
      <button class="heady-action-btn" onclick="HeadyAdmin.runHcfpCheck()">ğŸ›¡ï¸ Run HCFP Check</button>
      <button class="heady-action-btn" onclick="HeadyAdmin.backupConfig()">ğŸ’¾ Backup Config</button>
      <button class="heady-action-btn" onclick="HeadyAdmin.viewLogs()">ğŸ“‹ View Logs</button>
    </div>
  </div>
</div>

{# â”€â”€ HeadyBuddy Widget â”€â”€ #}
<script src="https://headybuddy.org/headybuddy-widget.js"></script>
